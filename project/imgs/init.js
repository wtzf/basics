require([],function(){var t=MoGu.ui.getdoT(),i=function(t){var i={url:"/book/ajax",wrap:null,tpl:"",data:{},startPage:1,cpc:[],firstData:[],scrollDiff:1e3,isfixWall:!0};t=$.extend({},i,t),this.container=t.wrap,this.feedTpl=t.tpl,this.url=t.url,this.isEnd=!1,this.loadError=!1,this.firstData=$.isArray(t.firstData)?t.firstData:[],this.cpc=$.isArray(t.cpc)?t.cpc:[],this.page=t.startPage>0?t.startPage:1,this.firstData.length&&1==this.page&&(this.page=2),this.winH=$(window).height(),this.refreshDocH(),this.scrollDiff=t.scrollDiff,this.loadingEl=$(".lr_loading"),this.isQuering=!1,this.screenNum=$("body").hasClass("media_screen_1200")?5:4,this.postData=t.data||{},this.isfixWall=$.inArray(t.isfixWall,[!0,!1])>-1?t.isfixWall:!0,this.init()};i.prototype={init:function(){this.container.length&&""!=this.feedTpl&&(this.firstData.length&&this.renderFeeds(this.mixData(this.firstData)),this.addEvent())},addEvent:function(){var t=this;this.randStr=this.randomString(5),this.onScrollEveName="scroll.lw_"+this.randStr,$(window).on(this.onScrollEveName,function(i){var a=$(this),e=a.scrollTop();t.documentH-(e+t.winH)<=t.scrollDiff&&t.loadFeeds()}).trigger(this.onScrollEveName)},randomString:function(t){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");t||(t=Math.floor(Math.random()*i.length));for(var a="",e=0;t>e;e++)a+=i[Math.floor(Math.random()*i.length)];return a},getFeeds:function(){var t={section:this.page,book:MoGuSearch.data.book||"",location:MoGuSearch.data.location||"search"};return $.ajax({url:this.url,type:"POST",dataType:"json",data:$.extend({},t,this.postData)})},getIwfNum:function(){return this.container.find(".iwf").length},mixData:function(t){if(!this.cpc.length||!t.length)return t;for(var i,a,e=this.getIwfNum()%this.screenNum,s=t.length+e+1,n=parseInt(s/this.screenNum),r=[].concat(t),o=1;n+1>=o;o++)i=this.screenNum*o-e-1,a=this.cpc.shift(),a&&r.splice(i,0,a);return r},loadFeeds:function(t){if(!(this.isQuering||this.loadError||this.isEnd)){t=t||1;var i=this;this.isQuering=!0,this.loadingEl.show(),this.getFeeds().then(function(a){if(!a.success)return void i.stopLoading();"string"==typeof a.data&&(a.data=JSON.parse(a.data)),window.console&&window.console.log(a.data),i.page++,i.isEnd=a.data.isEnd||!1,t--,i.isQuering=!1,i.loadingEl.hide();var e=i.mixData(a.data.list);if(i.renderFeeds(e),i.isEnd){var s=i.getIwfNum(),n=s%i.screenNum;i.isfixWall&&s>i.screenNum&&n&&i.container.find(".iwf").slice(s-n).remove(),$(window).off(i.onScrollEveName)}i._afterLoad({page:i.page,isEnd:i.isEnd,responseData:a.data}),!i.isEnd&&t>0&&i.loadFeeds(t)},function(){i.stopLoading()})}},stopLoading:function(){this.isQuering=!1,this.loadError=!0,this.loadingEl.hide(),$(window).off(this.onScrollEveName)},renderFeeds:function(i){this.container.append(t.template(this.feedTpl)({feeds:i})),this.refreshDocH()},renderPager:function(t){this.container.append(t)},refreshDocH:function(){this.documentH=$(document).height()},addAfterLoadFeed:function(t){this.afterLoadList||(this.afterLoadList=[]),$.isFunction(t)&&this.afterLoadList.push(t)},_afterLoad:function(t){this.afterLoadList||(this.afterLoadList=[]),$.each(this.afterLoadList,function(i,a){a(t)})}},MoGu.ImageWall=i});require([],function(){var A,e=function(e){var o=MoGu.util.getCookie("mgj_issuppor_webp");if(""!==o)return"true"===o?A=!0:"false"===o&&(A=!1),void e();var i=new Image;i.onload=function(){A=!0,MoGu.util.setCookie("mgj_issuppor_webp","true",{express:30}),e()},i.onerror=function(){A=!1,MoGu.util.setCookie("mgj_issuppor_webp","false",{express:30}),e()},i.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},o=function(){return"undefined"==typeof A&&window.console&&window.console.log("浏览器支持webp 检测出错，原因是：使用前未调用init 初始化函数"),!!A},i=function(A){if(!o())return A;var e=A.split("jpg"),i=e.length;return 2===i?-1==e[0].indexOf("png")&&-1==e[0].indexOf("gif")&&(A+="_999x999.v1c0.webp"):3===i&&(e.pop(),A=e.join("jpg")+"webp"),A};MoGu.SupportWebP={init:e,check:o,get:i}});require([],function(){jQuery.fn.pagination=function(e,t){return t=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{}),this.each(function(){function n(){return Math.ceil(e/t.items_per_page)}function a(){var e=Math.ceil(t.num_display_entries/2),a=n(),r=a-t.num_display_entries,i=s>e?Math.max(Math.min(s-e,r),0):0,_=s>e?Math.min(s+e,a):Math.min(t.num_display_entries,a);return[i,_]}function r(e,n){s=e,i();var a=t.callback(e,_);return a||(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0),a}function i(){_.empty();var e=a(),r=n(),i=function(e,n){if(e=0>e?0:r>e?e:r-1,n=jQuery.extend({text:e+1,classes:""},n||{}),e==s){if(n.text==t.prev_text||n.text==t.next_text)return;var a=jQuery("<a class='c'>"+n.text+"</a>")}else var a=jQuery("<a>"+n.text+"</a>").attr("rel","nofollow").attr("href",t.link_to.replace(/__id__/,e+1));n.classes&&a.addClass(n.classes),_.append(a)};if(t.prev_text&&(s>0||t.prev_show_always)&&i(s-1,{text:t.prev_text,classes:""}),e[0]>0&&t.num_edge_entries>0){for(var l=Math.min(t.num_edge_entries,e[0]),p=0;l>p;p++)i(p);t.num_edge_entries<e[0]&&t.ellipse_text&&jQuery("<i>"+t.ellipse_text+"</i>").appendTo(_)}for(var p=e[0];p<e[1];p++)i(p);if(e[1]<r&&t.num_edge_entries>0){r-t.num_edge_entries>e[1]&&t.ellipse_text&&jQuery("<i>"+t.ellipse_text+"</i>").appendTo(_);for(var u=Math.max(r-t.num_edge_entries,e[1]),p=u;r>p;p++)i(p)}t.next_text&&(r-1>s||t.next_show_always)&&i(s+1,{text:t.next_text,classes:""})}var s=t.current_page;e=!e||0>e?1:e,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page;var _=jQuery(this);this.selectPage=function(e){r(e)},this.prevPage=function(){return s>0?(r(s-1),!0):!1},this.nextPage=function(){return s<n()-1?(r(s+1),!0):!1},i(),t.callback(s,this)})}});require([],function(){window.__GetQueryString=function(e){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(r);return null!=n?decodeURIComponent(n[2]):""},window.__ConvertArrayToObject=function(e,r){var n={},t=e||[];return"string"==typeof t&&(t=JSON.parse(t)),$.each(t,function(e,t){n[t]=r||null}),n},window.__ConvertObjectToKeys=function(e){var r=[],n=e||{};return"string"==typeof n&&(n=JSON.parse(n)),r=$.map(n,function(e,r){return r})},window.__URLPrefix=function(){return location.pathname}(),window.__URLDefaultParams=function(){var e={},r=window.location.search.substr(1);return r?($.each(r.split("&"),function(r,n){var t=n.split("=");1==t.length&&t.push("__ONLYKEY__"),e[t[0]]=decodeURIComponent(t[1])}),e):e}(),window.__QParam=function(){return __GetQueryString("q")}(),window.__LastQParam=function(){return __GetQueryString("lastq")}(),window.__PPathParam=function(){return __GetQueryString("ppath")}(),window.__MinPriceParam=function(){return __GetQueryString("minPrice")}(),window.__MaxPriceParam=function(){return __GetQueryString("maxPrice")}(),window.__SortParam=function(){return __GetQueryString("sort")}(),window.__TagParam=function(){return __GetQueryString("tag")}(),window.__TagParamOfObject=function(){return __ConvertArrayToObject(__TagParam,!0)}(),window.__PageParam=function(){return __GetQueryString("page")}(),window.__CpcStartParam=function(){return __GetQueryString("cpcStart")}(),window.__ConvertQuotEscape=function(e){return e.replace(/"/g,"&quot;")},window.__CreateURL=function(e,r){var n=e||{},t=$.extend(!0,{},{excludeDefaultParams:!1,resetPageIndex:!0},r);t.excludeDefaultParams||(n=$.extend(!0,{},__URLDefaultParams,e||{}));var a=$.map(n,function(e,r){if(t.resetPageIndex&&"page"===r&&__PageParam)return["page","=",1].join("");if("__ONLYKEY__"===e)return[r].join("");if("__DELETE__"!==e){var n=e;"string"==typeof n&&(n=decodeURIComponent(n));try{/(^({|\[))[^\s]*((}|])$)/.test(n)&&(n=JSON.parse(n))}catch(a){}return $.isArray(n)?(n=JSON.stringify(n).slice(1,-1),n=["[",encodeURIComponent(n),"]"].join("")):$.isPlainObject(n)?(n=JSON.stringify(n).slice(1,-1),n=["{",encodeURIComponent(n),"}"].join("")):"string"==typeof n&&(n=encodeURIComponent(n)),[r,"=",n].join("")}}).join("&");return[__URLPrefix,a].join("?")},window.__CreateAllClassifyURL=function(){return __CreateURL({q:__QParam,sort:__SortParam||"__DELETE__",direct:1},{excludeDefaultParams:!0})},window.__CreateBreadCateURL=function(e){if(!e)return"#";var r={},n=e.catePropId;return r[e.catePropNameId]="number"==typeof n?JSON.stringify(n):n,__CreateURL({ppath:r})},window.__CreateBreadPropDataInfo=function(e){if(!e)return"{}";var r={pid:e.catePropNameId,id:[]};return e.cateProps&&e.cateProps.length>0&&(r.id=$.map(e.cateProps,function(e){return e.catePropId})),r=JSON.stringify(r),r=__ConvertQuotEscape(r)},window.__CreateBreadPropText=function(e){if(!e)return"";var r=[];return e.cateProps&&e.cateProps.length>0&&(r=$.map(e.cateProps,function(e){return e.name})),r=r.join(",")},window.__CreateMaySearchURL=function(e){return e?__CreateURL({q:e,from:"maysearch"},{excludeDefaultParams:!0}):"#"},window.__CreateSortURL=function(e){return e?__CreateURL({sort:e.value,from:"searchplacehold"}):"#"},window.__CreatePriceRanageURL=function(e){return e?__CreateURL({minPrice:e.minPrice||"__DELETE__",maxPrice:e.maxPrice||"__DELETE__",from:"searchplacehold"}):"#"},window.__CreateTagURL=function(e){if(!e)return"#";var r=[],n=[e.key,e.value].join(":");return r=$.extend(!0,{},__TagParamOfObject),r[n]?delete r[n]:r[n]=null,r=__ConvertObjectToKeys(r),__CreateURL({tag:0!==r.length?r:"__DELETE__",cpcStart:__CpcStartParam||0})},window.__CreateRecommendURL=function(e){return e?__CreateURL({q:[__QParam,e].join(" "),from:"hotrecommend2"},{excludeDefaultParams:!0}):"#"},window.__CheckIsShowNav=function(e){return __CheckIsShowNavCate(e.navCateInfo)?!0:__CheckIsShowNavProp(e.navPropInfo)?!0:!1},window.__CheckIsShowNavCate=function(e){return e&&e.length>0?!0:!1},window.__CheckIsShowNavProp=function(e){return e&&e.length>0?!0:!1},window.__CheckIsShowNavPropInfoSelect=function(e){if(!__CheckIsShowNavProp(e))return!1;var r=$.map(e,function(e,r){return e.parent&&"1"==e.parent.isSelect?!0:void 0}).length>0;return r},window.__CheckIsMoreCondition=function(){var e={ppath:"{}",tag:"",sort:"",minPrice:"",maxPrice:""};return $.map(__URLDefaultParams,function(r,n){return e.hasOwnProperty(n)&&e[n]!=r?!0:void 0}).length>0},window.__CheckSortIsSelected=function(e){return __SortParam||"pop"!=e.value?e.value==__SortParam:!0};var e=MoGuSearch.data.rewriteq;if(!__LastQParam&&e)return void(location.href=__CreateURL({q:e,lastq:__QParam}));var r=MoGuSearch.data.navPropInfo;r&&r.length&&$.map(r,function(e,r){e.parent&&"undefined"==typeof e.parent.isSelect&&(e.parent.isSelect=r>2?"1":"0")});var n=$("#search_condition_tpl").html(),t=MoGu.ui.getTemplate(n,MoGuSearch.data);$("#search_condition_box").html(t)});require([],function(){var t={};t.View={init:function(){this.initDom(),this.initStatus(),this.addEvent(),this.doNav()},initDom:function(){this.sortBar=$(".sort_nav")},doNav:function(){var t=$(".sort_nav"),e=t.find(".nav_inner"),n=e.find(".mgl"),i=($(".more_navs"),$(".nav_more")),a=(n.length,0);n.each(function(t){if(0==t)a=$(this).offset().top;else if(a!=$(this).offset().top)return i.addClass("on").show(),!1}),i.hasClass("on")&&t.on("mouseenter",".nav_right",function(e){$(e.target);!t.hasClass("active")&&t.addClass("active")}).on("mouseleave",".nav_right",function(e){$(e.target);t.hasClass("active")&&t.removeClass("active")})},initStatus:function(){var t=!1,e=location.href;e.indexOf("youxuan=1")>-1&&(t=!0,$(".mgl input[type=checkbox]").attr("checked",!0))},_parseUrl:function(){var t=[];if(location.href.indexOf("?")>-1){var e=location.href.split("?");$.each(e[1].split("&"),function(e,n){-1!=n.indexOf("page=")?t.push("page=1"):-1==n.indexOf("minPrice=")&&-1==n.indexOf("maxPrice=")&&t.push(n)});var n=decodeURIComponent(e[0]).replace(/\d/,"1");this.urlDefault=n+"?"+t.join("&")}else this.urlDefault=location.href+"?"},refresh:function(t,e){location.href=this.urlDefault+"&minPrice="+t+"&maxPrice="+e,window.event.returnValue=!1},addEvent:function(){var t=this;this.sortBar.on("click",".mgl",function(t){var e=$(this).data("href");location.href=e,window.event.returnValue=!1}),this.sortBar.on("click",".sbt",function(e){var n=parseInt(t.sortBar.find(".price .from").val())||"",i=parseInt(t.sortBar.find(".price .to").val())||"";return"number"==typeof n&&"number"==typeof i&&n>=i?void alert("价格上限不能低于价格下限"):(t._parseUrl(),void t.refresh(n,i))})}},t.View.init()});require([],function(){var i={};i.Model={data:{},parmaName:"ppath",init:function(i){this._parseUrl(i)},_parseUrl:function(i){var i=i||location.href,e=this,t=[];i.indexOf("?")>-1?(i=i.split("?"),$.each(i[1].split("&"),function(i,s){if(-1==s.indexOf(e.parmaName))t.push(s);else{var a=decodeURIComponent(s.replace(e.parmaName+"=",""));a=a.replace("[]","{}"),e._parseData(a)}}),this.urlPrefer=i[0].replace(/\/\d+\//,"/1/")+"?"+t.join("&")+"&"):this.urlPrefer=i+"?"},_parseData:function(i){this.data=$.parseJSON(i)},add:function(i){return($.isArray(i)||$.isPlainObject(i))&&$.isPlainObject(i)?(this.data[i.pid]=i.id,void this.refresh()):void 0},remove:function(i){var e=this;if($.isArray(i)||$.isPlainObject(i))return $.isPlainObject(i)?(delete this.data[i.pid],void this.refresh()):$.isArray(i)?($.each(i,function(i,t){delete e.data[t.pid]}),void e.refresh()):void 0},refresh:function(){var i={};$.each(this.data,function(e,t){$.isArray(t)&&(t=$.map(t,function(i,e){return"number"==typeof i?JSON.stringify(i):i})),i[e]="number"==typeof t?JSON.stringify(t):t}),this.url=__CreateURL({ppath:i}),location.href=this.url}},i.Model.init(),i.View={model:i.Model,init:function(){this.initDom(),this.addEvent()},initDom:function(){this.filterWrap=$(".search_filter_wrap"),this.searchBread=$(".search_bread"),this.items=this.filterWrap.find(".filter_right")},addEvent:function(){var i=this;this.searchBread.on("click",".cancel",function(e){var t=$(this),s=t.data("info");i.model.remove({pid:s.pid,id:s.id})}),this.searchBread.on("click",".clear_all",function(e){var t=i.searchBread.find(".bread_choose li"),s=[];$.each(t,function(i,e){var t=$(e).data("info");s.push({pid:t.pid,id:t.id})}),i.model.remove(s)}),this.filterWrap.on("click",".show_more",function(i){var e=$(this),t=e.siblings(".inner"),s=t.find("ul"),a=s.siblings(".sub_box");s.hasClass("mutil")?(s.removeClass("mutil"),a.removeClass("show"),e.siblings(".mutil_sele").show()):s.hasClass("close")?s.removeClass("close"):s.addClass("close")}),this.filterWrap.on("click",".mutil_sele",function(e){var t=$(this),s=t.siblings(".inner"),a=s.find("ul"),n=a.siblings(".sub_box");$.each(i.items,function(i,e){$(e).find(".filter_item").removeClass("mutil"),$(e).find(".sub_box").removeClass("show"),$(e).find(".mutil_sele").show()}),a.addClass("mutil"),n.addClass("show"),t.hide()}),this.filterWrap.on("click",".sele_box",function(i){i.stopPropagation()}),this.filterWrap.on("click",".mutil li span",function(i){i.stopPropagation();var e=$(this),t=e.siblings(".sele_box");"checked"==t.find("input").attr("checked")?t.find("input").attr("checked",!1):t.find("input").attr("checked","checked")}),this.filterWrap.on("click",".sele_confirm",function(e){e.stopPropagation();var t=$(this),s=t.parent().siblings("ul").find("li"),a=t.parents(".filter_item_wrap"),n=[],r=a.data("id");$.each(s,function(i,e){var t=$(e).data("id");"checked"==$(e).find("input").attr("checked")&&n.push(t)}),r&&n.length?i.model.add({pid:r,id:n}):t.siblings(".sele_cancel").trigger("click")}),this.filterWrap.on("click",".sele_cancel",function(){var i=$(this),e=i.parents(".inner"),t=e.find("ul"),s=t.siblings(".sub_box");$.each(t,function(i,e){$(e).find("input").attr("checked",!1)}),t.hasClass("mutil")?(t.removeClass("mutil"),s.removeClass("show"),e.siblings(".mutil_sele").show()):t.hasClass("open")?t.removeClass("open"):t.addClass("open")}),this.filterWrap.on("mouseenter",".meta_item dd",function(i){var e=($(this),$(this).find(".meta"));e.hasClass("on")||e.addClass("on").siblings("ul").show()}),this.filterWrap.on("mouseleave",".meta_item dd",function(i){var e=($(this),$(this).find(".meta"));e.hasClass("on")&&e.removeClass("on").siblings("ul").hide()}),this.filterWrap.on("click",".filter_item li,.ext_mod li,.can_click",function(e){e.stopPropagation();var t=$(this),s=t.data("id"),a=t.parents(".filter_item_wrap").data("id")||t.parents("dd").data("id");a&&s&&i.model.add({pid:a,id:s})})}},i.View.init()});require([],function(){MoGu.SupportWebP.init(function(){function e(e){var a,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(a=document.cookie.match(t))?unescape(a[2]):null}function a(){if($("#imagewall_v1").size()>0){var e=$("#imagewall_v1");$('<div class="more_recommended_box">你可能想找的商品：</div>').insertBefore(e);var a=new MoGu.ImageWall({url:"/ajax/pcsearchwall/1",wrap:$("#imagewall_v1"),tpl:["{{~it.feeds :feed:i}}","{{?feed.resource == 1}}",'<div class="iwf">','<a rel="nofollow" class="cps" href="{{=feed.link}}">','<img src="{{=feed.image}}">',"</a>","</div>","{{??}}",'<div class="iwf" data-iid="{{=feed.iid}}" data-tid="{{=feed.tid}}">','<a rel="nofollow" href="{{=MoGu.Temp.getDetailLink(feed, i)}}" class="img" target="_blank">','<img src="{{=MoGu.Temp.getImageURL(feed.image+"_220x330.jpg")}}" alt="{{=feed.title}}">',"</a>",'<p class="title">',"{{ if(feed.leftbottom_taglist && feed.leftbottom_taglist.length > 0){ }}",'<span class="icon_xp">',"{{~feed.leftbottom_taglist:imgSrc:imgIndex}}",'<img src="{{=feed.leftbottom_taglist[imgIndex]}}" class="tagImage">',"{{~}}","</span>","{{ } }}",'<a rel="nofollow" href="{{=MoGu.Temp.getDetailLink(feed, i)}}" target="_blank" {{ if(!(feed.leftbottom_taglist && feed.leftbottom_taglist.length > 0)){ }} style="width:220px" {{ } }}>{{=feed.title}}</a>',"</p>",'<div class="goods_info">','<b class="price_info"><!--<i>￥</i>-->{{=feed.price}}</b>','<span class="fav_num {{?feed.isFave}}faved_num{{?}}">{{=feed.cfav}}</span>',"</div>","{{ if(feed.eleven_img){ }}",'<span class="icon_event_lefttop iwf_icon" style="width:{{=MoGu.Temp.getImageSize(feed.eleven_img)[0]}}px;height:{{=MoGu.Temp.getImageSize(feed.eleven_img)[1]}}px"><img src="{{=feed.eleven_img}}"></span>',"{{ }else if(feed.lefttop_taglist && feed.lefttop_taglist.length > 0){ }}",'<span class="icon_event_lefttop iwf_icon iwf_icon_taglist">',"{{~feed.lefttop_taglist :tagImageValue:tagImageIndex}}",'<img src="{{=feed.lefttop_taglist[tagImageIndex]}}">',"{{~}}","</span>","{{ }else if(feed.tags && feed.tags[0]){ }}",'<a rel="nofollow" class="icon_yx iwf_icon" target="_blank" href="{{=MoGu.Temp.getDetailLink(feed, i)}}">{{=feed.tags[0].text}}</a>',"{{ } }}","{{?feed.atags}}",'<span class="atags">{{=feed.atags}}</span>',"{{?}}","</div>","{{?}}","{{~}}"].join(""),startPage:1,scrollDiff:3e3,isfixWall:!1,data:{book:MoGuSearch.data.otherBook||"",isWidth:i,token:MoGuSearch.token}});a.addAfterLoadFeed(function(e){e.responseData.book&&(a.postData.book=e.responseData.book),$("#imagewall_v1 .pagination").hide();var t=log_stat_url_tmp+"&refer="+encodeURIComponent("/ajax/pcsearchwall/1")+"&rerefer="+encodeURIComponent(window.location.href)+"&anchor="+log_stat_anchor;$.ajax({url:t,type:"post",dataType:"jsonp",jsonpCallback:"logCallBack"})})}}var t=['<div class="recommendKeys">','<span class="lable">热点推荐：</span>',"<ul>","{{~it:item}}",'<li class="key">','<a rel="nofollow" href="{{=__CreateRecommendURL(item.title)}}">',"{{=item.title}}","</a>","</li>","{{~}}","</ul>","</div>"].join("");MoGu.Temp=MoGu.Temp||{},MoGu.Temp.getImageURL=MoGu.SupportWebP.get,MoGu.Temp.getImageSize=function(e){return e.match(/(\d+)x(\d+)/),[RegExp.$1,RegExp.$2]},MoGu.Temp.getDetailLink=function(e,a){var t="http://shop.mogujie.com/detail/"+e.iid,i=[];return e.traceid&&i.push("traceid="+e.traceid),e.cparam&&i.push("cparam="+e.cparam),e.acm&&i.push("acm="+e.acm+"-"+a),i.length>0&&(t+="?"+i.join("&")),t};var i=$(window).width()>1212?!0:!1,o=new MoGu.ImageWall({url:"/ajax/pcsearchwall/1",wrap:$("#imagewall_container"),tpl:["{{~it.feeds :feed:i}}","{{?feed.resource == 1}}",'<div class="iwf">','<a rel="nofollow" class="cps" href="{{=feed.link}}" target="_blank">','<img src="{{=feed.image}}">',"</a>","</div>","{{??}}",'<div class="iwf" data-iid="{{=feed.iid}}">','<a rel="nofollow" href="{{=MoGu.Temp.getDetailLink(feed, i)}}" class="img" target="_blank">','<img src="{{=MoGu.Temp.getImageURL(feed.image+"_220x330.jpg")}}" alt="{{=feed.title}}">',"</a>",'{{ if(feed.searchTag && feed.searchTag.indexOf("100") != -1){ }}','<div class="likeLink">找相似&nbsp;','<img src="http://s16.mogucdn.com/p1/151209/upload_ie3wmyrvhftdmyzvguzdambqgayde_7x13.png">',"</div>","{{ } }}",'<p class="title">',"{{ if(feed.leftbottom_taglist && feed.leftbottom_taglist.length > 0){ }}",'<span class="icon_xp">',"{{~feed.leftbottom_taglist:imgSrc:imgIndex}}",'<img src="{{=feed.leftbottom_taglist[imgIndex]}}" class="tagImage">',"{{~}}","</span>","{{ } }}",'<a rel="nofollow" href="{{=MoGu.Temp.getDetailLink(feed, i)}}" target="_blank" {{ if(!(feed.leftbottom_taglist && feed.leftbottom_taglist.length > 0)){ }} style="width:220px" {{ } }}>',"{{=feed.title}}","</a>","</p>",'<div class="goods_info">','<b class="price_info"><!--<i>￥</i>-->{{=feed.price}}</b>','<span class="fav_num {{?feed.isFave}}faved_num{{?}}">{{=feed.cfav}}</span>',"</div>","{{ if(feed.eleven_img){ }}",'<span class="icon_event_lefttop iwf_icon" style="width:{{=MoGu.Temp.getImageSize(feed.eleven_img)[0]}}px;height:{{=MoGu.Temp.getImageSize(feed.eleven_img)[1]}}px">','<img src="{{=feed.eleven_img}}">',"</span>","{{ }else if(feed.lefttop_taglist && feed.lefttop_taglist.length > 0){ }}",'<span class="icon_event_lefttop iwf_icon iwf_icon_taglist">',"{{~feed.lefttop_taglist :tagImageValue:tagImageIndex}}",'<img src="{{=feed.lefttop_taglist[tagImageIndex]}}">',"{{~}}","</span>","{{ }else if(feed.tags && feed.tags[0]){ }}",'<a rel="nofollow" class="icon_yx iwf_icon" target="_blank" href="{{=MoGu.Temp.getDetailLink(feed, i)}}">{{=feed.tags[0].text}}</a>',"{{ } }}","{{?feed.atags}}",'<span class="atags">{{=feed.atags}}</span>',"{{?}}","</div>","{{?}}","{{~}}"].join(""),startPage:1,scrollDiff:3e3,isfixWall:!1,data:{book:MoGuSearch.data.book||"",isWidth:i,token:MoGuSearch.token}}),l=0,s=0;o.addAfterLoadFeed(function(i){if(i.responseData.totalPage&&(l=i.responseData.totalPage),i.responseData.cpcStart&&(s=i.responseData.cpcStart),i.isEnd&&l>1){var n=$('<div class="pagination pd_tb"></div>');n.appendTo(o.container);var d=window.__CreateURL({page:"__id__",cpcStart:s},{resetPageIndex:!1});n.pagination(10*l,{current_page:Number(__PageParam||1)-1,num_display_entries:5,num_edge_entries:1,prev_text:"<",next_text:"下一页>",link_to:d,callback:function(){return!0}})}i.responseData.book&&(o.postData.book=i.responseData.book);var c=log_stat_url_tmp+"&refer="+encodeURIComponent("/ajax/pcsearchwall/1")+"&rerefer="+encodeURIComponent(window.location.href)+"&anchor="+log_stat_anchor;$.ajax({url:c,type:"post",dataType:"jsonp",jsonpCallback:"logCallBack"});var f=i.responseData.recommend||[];f.length>0&&($("#imagewall_container").append(MoGu.ui.getTemplate(t,f)),$(".recommendKeys").on("click","li",function(){var e=$(this).data("url");e&&(window.location.href=e)})),i.isEnd&&($("#body_wrap").on("click",".hot_nav_list li",function(e){e.preventDefault();var a=$(".hot_nav_list li").index($(this));$(this).addClass("on").siblings().removeClass("on"),$(".search_hot_bottom .hot_sections").css("display","none");var t=$(".search_hot_bottom .hot_sections").get(a);$(t).css("display","block")}),a());for(var r=i.responseData.params||{},g={cpcs:[],acms:[],iids:[],indexs:[],_mgjuuid:e("__mgjuuid")},p={eventid:"cpc_70011",cparams:[]},m=[],_=i.responseData.list||[],u=0;u<_.length;u++){var h={};h.acm=_[u].acm+"-"+u,h.itemId=_[u].iid,m.push(h);var v=r.section;g.indexs.push(u+(v-1)*_.length),g.acms.push(_[u].acm),g.iids.push(_[u].iid),_[u].cparam&&g.cpcs.push(_[u].iid),_[u].cparam&&p.cparams.push(_[u].cparam)}var w=window.detePtp;try{var k=$.extend({},g,r),b=$.extend({},r,p);w.logFromtSend("e",70011,k),w.logFromtSend("e",70015,b)}catch(x){window.console&&console.log("e事件打点出错：",x)}})}),$("#imagewall_container").on("mouseenter",".iwf",function(){$(this).children(".likeLink").fadeIn(100)}).on("mouseleave",".iwf",function(){$(this).children(".likeLink").fadeOut(100)}),$("#imagewall_container").on("click",".likeLink",function(){window.open("http://www.mogujie.com/relative/search/"+$(this).parent().data("iid"))})});